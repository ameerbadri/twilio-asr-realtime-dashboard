<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Twilio Real-Time ASR Dashboard">
        <meta name="author" content="Ameer Badri, Twilio">
        <title>Twilio ASR Dashboard</title>
        <!--  <link href="style.css" rel="stylesheet"> -->
        <!-- import CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.css"/>
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body style="">
        <div class="ui fluid container" title="">
            <div id="asrdashboard">
                <table class="ui table">
                        <thead>
                            <tr>
                                <!-- <th class="two wide left aligned"><img src="/images/mandslogo.png" class="ui tiny image"></th> -->
                                <th class="nine wide center aligned"><h2 class="ui center aligned header"> Real-Time Speech Recoginition Dashboard</h2></th>                            
                                <th class="one wide right aligned"><img src="/images/twiliologo.svg" class="ui small image"></th>
                            </tr>
                        </thead>
                </table>

                <table class="ui very basic table">
                        <thead>
                            <tr>
                                <th class="six wide left aligned"><pie-chart :data="callIntentData" width="350px" height="125px" legend="true" :download="true"></pie-chart></th>                           
                                <th class="five wide center aligned">                        
                                    <div class="ui large statistic">
                                        <div class="value">
                                            {{totalIVRInteractions}}
                                        </div>
                                        <div class="label">
                                            Most Recent IVR Interactions
                                        </div>
                                    </div>
                                </th>
                                <th class="five wide right aligned">
                                    <div float:right width="500px" height="125px">
                                        <line-chart :data="callIntentTrendsData" width="500px" height="125px" xtitle="Date" ytitle="Intents" legend="false" :download="true"></legend>/></line-chart></th>
                                    </div> 
                        </thead>
                </table>
                <table id="logdata" class="ui very basic celled table">
                    <thead>
                        <tr>
                            <th class="two wide center aligned">Date Created</th>
                            <th class="one wide center aligned">From</th>
                            <th class="five wide center aligned">ASR</th>                            
                            <th class="one wide center aligned">ASR Confidence</th>
                            <th class="two wide center aligned">Intent (Dialogflow)</th>
                            <th class="one wide center aligned">Intent Score</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="call in reverseCallList" :key="call.CallSid">
                            <td class="center aligned">
                                {{call.CallDate}}
                            </td>
                            <td class="center aligned"> 
                                {{call.From}}
                            </td>
                            <td class="left aligned">
                                <h3>{{call.SpeechResult}}</h3>
                            </td>  
                            <td class="center aligned">
                                {{call.ASRConfidence}}%
                            </td>                                                      
                            <td class="center aligned">
                                {{call.Intent}}
                            </td>
                            <td class="center aligned">
                                {{call.IntentScore}}
                            </td>
                        <tr>
                    </tbody>
                </table>    
            </div>
        </div>    
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.js"></script>
        <script src="https://unpkg.com/vue"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script src="https://media.twiliocdn.com/sdk/js/sync/v0.6/twilio-sync.min.js"></script>
        <!-- <script src="https://media.twiliocdn.com/sdk/js/sync/releases/0.7.0/twilio-sync.min.js"></script> -->
        <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.4/lodash.min.js"></script>
        <script src="https://unpkg.com/chart.js@2.7.1/dist/Chart.bundle.js"></script>
        <script src="https://unpkg.com/chartkick@2.2.4"></script>
        <script src="https://unpkg.com/vue-chartkick@0.2.0/dist/vue-chartkick.js"></script>
        <script src="/asr_dashboard.js"></script>
    </body>
</html>